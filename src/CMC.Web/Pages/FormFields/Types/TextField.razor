@using CMC.Web.Pages.FormFields
@inherits FormFieldBase

<div class="form-row @(Errors?.Length > 0 ? "is-invalid" : null)">
    <label class="form-label" for="@Name">@Label</label>
    <input
        class="@ControlCss()"
        id="@Name"
        type="@InputType"
        value="@(Value?.ToString() ?? string.Empty)"
        disabled="@ReadOnly"
        required="@Required"
        autocomplete="@Autocomplete"
        @oninput="HandleInput"
        @attributes="AdditionalAttributes" />

    @if (!string.IsNullOrWhiteSpace(Hint))
    {
        <div class="form-hint">@Hint</div>
    }
    @if (Errors?.Length > 0)
    {
        <div class="field-error">
            @foreach (var e in Errors) { <div>@e</div> }
        </div>
    }
</div>

@code {
    [Parameter] public string InputType { get; set; } = "text";
    [Parameter] public string? Autocomplete { get; set; }

    private async Task HandleInput(ChangeEventArgs e)
        => await OnChanged(e.Value?.ToString());
}
